# ğŸ” IoT Access Control System (ESP32 + RFID) with Web Supervision Dashboard

A complete **IoT access control** project using **ESP32 + RFID** with a modern **real-time Web Dashboard** powered by **FastAPI** and **SQLite**. The system logs every access attempt (**GRANTED / DENIED**), monitors door status, provides **security analytics (risk score + alerts)**, and supports **remote control commands** (open door, lockdown, buzzer test).

---

## ğŸ¥ Demo

- **YouTube demo:** [https://youtu.be/ON90uifTUuU](https://youtu.be/ON90uifTUuU)
- **Canva presentation:** _([CANVA PRESENTATION](https://www.canva.com/design/DAG9ZJmVTqA/PKFPvwCegPuGgWIxqx2piA/edit?utm_content=DAG9ZJmVTqA&utm_campaign=designshare&utm_medium=link2&utm_source=sharebutton))_

---

## âœ¨ Key Features

- âœ… RFID access control (authorized/unauthorized)
- âœ… Visual & sound feedback: **LEDs + Buzzer**
- âœ… Stores all events in **SQLite**
- âœ… Modern Web Dashboard:
  - KPIs: total attempts, granted, denied, door status, last update
  - Charts: activity (GRANTED vs DENIED)
  - Heatmap: peak usage hours (hours Ã— days)
  - Access logs with filtering + **CSV export**

- âœ… Remote control:
  - **Open door**
  - **Lockdown ON/OFF**
  - **Buzzer test**

- âœ… Security analytics:
  - Failure rate
  - Brute-force detection
  - Suspicious-time activity detection
  - Risk score + risk level (LOW / MEDIUM / HIGH / CRITICAL)

---

## ğŸ§° Tech Stack

### Hardware

- ESP32 (e.g., ESP32-S3)
- RFID reader (MFRC522)
- Relay module (door lock control)
- LEDs (Red/Green) + resistors
- Active buzzer
- Breadboard + jumper wires

### Software

- Backend: **FastAPI**
- Database: **SQLite**
- Frontend: **HTML / CSS / JavaScript**
- Charts: **Chart.js**
- REST API (JSON)

---

## ğŸ—ï¸ System Architecture

1. **ESP32** reads the RFID UID from the MFRC522 module.
2. ESP32 sends events to the **FastAPI server** via REST API.
3. The server stores logs in **SQLite** and computes stats + security metrics.
4. The **Web Dashboard** displays live logs/analytics and sends remote commands.

---

## ğŸ§¾ Wiring Diagram (ESP32 + RFID + Relay + LEDs + Buzzer)



![Wiring Diagram](assets/wiring/wiring-diagram.png)

---

## ğŸ“¸ Screenshots



### 1) Login

![Login](assets/screenshots/01-login.png)

### 2) Dashboard (Light Mode)

![Dashboard Light](assets/screenshots/02-dashboard-light.png)

### 3) Dashboard (Dark Mode)

![Dashboard Dark](assets/screenshots/03-dashboard-dark.png)

### 4) Control Commands & Filters

![Controls and Filters](assets/screenshots/04-controls-filters.png)

### 5) Activity Heatmap & Activity Chart

![Heatmap and Activity Chart](assets/screenshots/05-heatmap-activity-chart.png)

### 6) Access Log & CSV Export

![Access Log and CSV Export](assets/screenshots/06-access-log-csv-export.png)

---

## ğŸ“ Project Structure

Recommended structure (matches the FastAPI static folder setup):

```text
.
â”œâ”€â”€ esp32_rfid/                  # ESP32 firmware (.ino)
â”œâ”€â”€ web/                         # Dashboard files (index.html, app.js, style.css, ...)
â”œâ”€â”€ server.py                    # FastAPI backend server
â”œâ”€â”€ requirements.txt             # Python dependencies
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ wiring/
â”‚   â”‚   â””â”€â”€ wiring-diagram.png
â”‚   â””â”€â”€ screenshots/
â”‚       â”œâ”€â”€ 01-login.png
â”‚       â”œâ”€â”€ 02-dashboard-light.png
â”‚       â”œâ”€â”€ 03-dashboard-dark.png
â”‚       â”œâ”€â”€ 04-controls-filters.png
â”‚       â”œâ”€â”€ 05-heatmap-activity-chart.png
â”‚       â””â”€â”€ 06-access-log-csv-export.png
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

---

## ğŸš€ Getting Started

### 1) Install dependencies

```bash
pip install -r requirements.txt
```

### 2) Run the server

```bash
python server.py
```

### 3) Open the dashboard

Open in your browser:

```text
http://localhost:3000
```

---

## ğŸ”Œ ESP32 Configuration

Set your server base URL inside the ESP32 firmware (API base URL), for example:

```text
http://192.168.1.10:3000
```

Make sure:

- ESP32 and the server are on the same Wiâ€‘Fi network
- Your firewall allows incoming connections on port **3000**

---

## ğŸ” Dashboard Login (Demo)

The dashboard currently includes a simple demo login:

- Username: `admin`
- Password: `admin`

> âš ï¸ For production use, replace demo credentials and use secure authentication.

---

## ğŸ”— API Overview

Main endpoints:

- `POST /api/access` â€” log an access attempt (`authorized` / `unauthorized`)
- `POST /api/heartbeat` â€” device heartbeat + door status
- `GET /api/logs` â€” access logs (supports `range` + `limit`)
- `GET /api/stats` â€” totals + time series
- `GET /api/security` â€” risk score + alerts
- `POST /api/control/queue` â€” enqueue a remote command
- `GET /api/control/pending` â€” ESP32 polls for pending commands

---

## ğŸ§¹ .gitignore (IMPORTANT)

Do not commit virtual environments, cache, or database files:

```gitignore
.venv/
__pycache__/
*.db
.env
```

---

## ğŸ§ª Sample Requests (Optional)

### Log an access attempt

```bash
curl -X POST http://localhost:3000/api/access \
  -H "Content-Type: application/json" \
  -d '{"deviceId":"door_01","uid":"1A4DA57E","status":"authorized"}'
```

### Get latest logs

```bash
curl "http://localhost:3000/api/logs?limit=25&range=24h"
```

### Queue a control command

```bash
curl -X POST http://localhost:3000/api/control/queue \
  -H "Content-Type: application/json" \
  -d '{"deviceId":"door_01","cmd":"open"}'
```

---

## ğŸ›¡ï¸ Notes

- This project is intended for learning / portfolio / demo use.
- Harden security before real deployment (auth, HTTPS, access rules, etc.).

---

## ğŸ‘¤ Author / Credits

- Project: IoT Access Control with Web Supervision Dashboard
- Institution: ENSA (Cybersecurity / IoT)
